(function(b){b.Template=function(){var i={},h={"\\":"\\\\","\n":"\\n","\r":"\\r","{{":"');cb(","}}":");cb('","{%":"');","%}":"\ncb('"};return function(k,l,j){i[k=k||""]=i[k]||new Function("_","cb","with(_){"+("%}"+k+"{%").replace(/([\\\n\r]|{{|}}|{%|%})/g,function(n){return h[n]})+"}return cb");try{return l?i[k](l,j):i[k]}catch(m){return m}}};b.StringBuffer=function(){var h=[],i=function(j){h.push(j)};i.toString=function(){return h.join("")};return i};var c=[].unshift,g=[].slice,a=Object.assign;function f(j,i,h){return j instanceof Function&&j.apply(i,h)}var d={};b.Event=function(j,i,h){if(j instanceof Event){var k=d[h];return k&&f(k[i],k,[j])}else{h=j._index;if(h){d[h]=j;return{on:function(m,l){j[m]=l;return"tplite.Event(event, "+m+", "+h+")"},off:function(){Object.keys(j).map(function(l){if(l>0){delete j[l]}})}}}}};var e=0;b.Component=function(k,j,o,i){var l=++e;var m=new b.Template();var n=m(k);function h(p,y){function v(B){var A=g.call(arguments,1);return t.on(++e,function(C){return f(j[B],z,A.concat(C))})}function r(B){var A=g.call(arguments,1);return !j[B]||f(j[B],z,A)}function s(A){z.state=p=a({self:z},p,A);if(y&&p&&r("shouldUpdate")){t.off();q();requestAnimationFrame(function(){r("onUpdate");if(!u){r("onMount");u=true}})}return z}function q(){var A=new b.StringBuffer();n(a(p,x),A);if(y){return y.innerHTML=A.toString()}return A.toString()}function w(A){y=A;s();return z}var u=false;var z={state:p,render:q,mount:w,setState:s,trigger:r,root:y,_index:l};var t=b.Event(z);var x=Object.keys(j).reduce(function(B,A){B[A]=function(){c.call(arguments,A);return v.apply(z,arguments)};return B},{bind:v});r("onInit");return w(y)}return o?h(o,i):h}}(typeof exports==="undefined"?this.tplite||(this.tplite={}):exports));