(function(b){b.Template=function(){var i={},h={"\\":"\\\\","\n":"\\n","\r":"\\r","{{":"');cb(","}}":");cb('","{%":"');","%}":"\ncb('"};return function(k,l,j){i[k=k||""]=i[k]||new Function("_","cb","with(_){"+("%}"+k+"{%").replace(/([\\\n\r]|{{|}}|{%|%})/g,function(n){return h[n]})+"}return cb");try{return l?i[k](l,j):i[k]}catch(m){return m}}};b.StringBuffer=function(){var h=[],i=function(j){h.push(j)};i.toString=function(){return h.join("")};return i};var c=[].unshift,g=[].slice,a=Object.assign;function f(j,i,h){return j instanceof Function&&j.apply(i,h)}var d={};b.Event=function(j,i,h){if(j instanceof Event){var k=d[h];return k&&f(k[i],k,[j])}else{h=j._index;if(h){d[h]=j;return{on:function(m,l){j[m]=l;return"tplite.Event(event, "+m+", "+h+")"},off:function(){Object.keys(j).map(function(l){if(l>0){delete j[l]}})}}}}};var e=0;b.Component=function(t,n,h,s){var l=++e;var o=false;var v=new b.Template();var w=v(t);var u={state:h,render:i,mount:q,setState:k,trigger:j,root:s,_index:l};var m=b.Event(u);var r=Object.keys(n).reduce(function(x,y){x[y]=function(){c.call(arguments,y);return p.apply(u,arguments)};return x},{bind:p});function p(y){var x=g.call(arguments,1);return m.on(++e,function(z){return f(n[y],u,x.concat(z))})}function j(y){var x=g.call(arguments,1);return !n[y]||f(n[y],u,x)}function k(x){u.state=h=a({},h||{},x||{});if(s&&h&&j("shouldUpdate")){m.off();i();requestAnimationFrame(function(){j("onUpdate");if(!o){j("onMount");o=true}})}return u}function i(){var x=new b.StringBuffer();w(a(h,r),x);if(s){return s.innerHTML=x.toString()}return x.toString()}function q(x){s=x;k();return u}j("onInit");return q(s)}}(typeof exports==="undefined"?this.tplite||(this.tplite={}):exports));