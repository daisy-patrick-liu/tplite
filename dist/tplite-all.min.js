(function(d){d.Template=function(){var o={},n={"\\":"\\\\","\n":"\\n","\r":"\\r","{{":"');cb(","}}":");cb('","{%":"');","%}":"\ncb('"};return function(q,r,p){o[q=q||""]=o[q]||new Function("_","cb","with(_){"+("%}"+q+"{%").replace(/([\\\n\r]|{{|}}|{%|%})/g,function(t){return n[t]})+"}return cb");try{return r?o[q](r,p):o[q]}catch(s){return s}}};d.StringBuffer=function(){var n=[],o=function(p){n.push(p)};o.toString=function(){return n.join("")};return o};var a,l=$.observable({}),b=window.addEventListener,h=document,j;function i(n){n=n.type?location.hash:n;if(n!=a){if(j instanceof Function){j(n)}}a=n}if(b){b("popstate",i,false);h.addEventListener("DOMContentLoaded",i,false)}else{h.attachEvent("onreadystatechange",function(){if(h.readyState==="complete"){i("")}})}d.Router=function(n){if(typeof n==="function"){return j=n}if(history.pushState){history.pushState(0,0,n)}i(n)};var c=[].unshift,g=[].slice,m=Object.assign;function f(p,o,n){return p instanceof Function&&p.apply(o,n)}var k={};d.Event=function(p,o,n){if(p instanceof Event){var q=k[n];return q&&f(q[o],q,[p])}else{n=p._index;if(n){k[n]=p;return{on:function(s,r){p[s]=r;return"tplite.Event(event, "+s+", "+n+")"},off:function(){Object.keys(p).map(function(r){if(r>0){delete p[r]}})}}}}};var e=0;d.Component=function(z,t,n,y){var r=++e;var u=false;var B=new d.Template();var C=B(z);var A={state:n,render:o,mount:w,setState:q,trigger:p,root:y,_index:r};var s=d.Event(A);var x=Object.keys(t).reduce(function(D,E){D[E]=function(){c.call(arguments,E);return v.apply(A,arguments)};return D},{bind:v});function v(E){var D=g.call(arguments,1);return s.on(++e,function(F){return f(t[E],A,D.concat(F))})}function p(E){var D=g.call(arguments,1);return !t[E]||f(t[E],A,D)}function q(D){A.state=n=m({},n||{},D||{});if(y&&n&&p("shouldUpdate")){s.off();o();requestAnimationFrame(function(){p("onUpdate");if(!u){p("onMount");u=true}})}return A}function o(){var D=new d.StringBuffer();C(m(n,x),D);if(y){return y.innerHTML=D.toString()}return D.toString()}function w(D){y=D;q();return A}p("onInit");return w(y)}}(typeof exports==="undefined"?this.tplite||(this.tplite={}):exports));