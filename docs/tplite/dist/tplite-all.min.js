(function(b){b.Template=function(){var i={},h={"\\":"\\\\","\n":"\\n","\r":"\\r","{{":"');cb(","}}":");cb('","{%":"');","%}":"\ncb('"};return function(k,l,j){i[k=k||""]=i[k]||new Function("_","cb","with(_){"+("%}"+k+"{%").replace(/([\\\n\r]|{{|}}|{%|%})/g,function(n){return h[n]})+"}return cb");try{return l?i[k](l,j):i[k]}catch(m){return m}}};b.StringBuffer=function(){var h=[],i=function(j){h.push(j)};i.toString=function(){return h.join("")};return i};var c=[].unshift,g=[].slice,a=Object.assign;function f(j,i,h){return j instanceof Function&&j.apply(i,h)}var d={};b.Event=function(j,i,h){if(j instanceof Event){var k=d[h];return k&&f(k[i],k,[j])}else{h=j._index;if(h){d[h]=j;return{on:function(m,l){j[m]=l;return"tplite.Event(event, "+m+", "+h+")"},off:function(){Object.keys(j).map(function(l){if(l>0){delete j[l]}})}}}}};var e=0;b.Component=function(u,o,i,t){var m=++e;var p=false;var w=new b.Template();var x=w(u);var v={state:i,render:j,mount:r,setState:l,trigger:k,root:t,_index:m};var n=b.Event(v);var s=Object.keys(o).reduce(function(y,z){y[z]=function(){c.call(arguments,z);return q.apply(v,arguments)};return y},{bind:q,sub:function h(){var y=b.Component.apply({},arguments);n.on(++e,y.setState({parent:v}));return y.render()}});function q(z){var y=g.call(arguments,1);return n.on(++e,function(A){return f(o[z],v,y.concat(A))})}function k(z){var y=g.call(arguments,1);return !o[z]||f(o[z],v,y)}function l(y){v.state=i=a({},i,y);if(t&&i&&k("shouldUpdate")){n.off();j();requestAnimationFrame(function(){k("onUpdate");if(!p){k("onMount");p=true}})}return v}function j(){var y=new b.StringBuffer();x(a(i,s),y);if(t){return t.innerHTML=y.toString()}return y.toString()}function r(y){t=y;l();return v}k("onInit");return r(t)}}(typeof exports==="undefined"?this.tplite||(this.tplite={}):exports));